<!-- En tu archivo HTML -->

<body>
  <div class="container bg-light border border-start-0 rounded-4">
    <!-- Detalle POA -->
    <blockquote style="margin-top: 5%; background-color: #ffffff; border-left: 10px solid green;">

      <div class="header-container">
        <h1 class="header-title">LISTA DE ARCHIVOS</h1>
      </div>
    </blockquote>
    <!-- Botón Evaluar -->
    <div class="contBtnEva">
    <button
      class="btn btn-warning"
      (click)="abrirModal(evaluarPOAModal)"
    >
      Evaluar
    </button>
  </div>
    <div class="example-container">
      <!-- Inputs -->
      <!-- Columna izquierda -->
      <div class="input-container">
        <!-- <div class="form-column">
                    <mat-form-field class="form-field">
                        <mat-label>Direccion Departamental</mat-label>
                        <input matInput [formControl]="direcciondep" readonly value="Dirección Quemada"
                            title="Dirección Quemada (Texto demasiado largo)">
                    </mat-form-field>
                </div>-->
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Responsable</mat-label>
            <input
              matInput
              [formControl]="responsable"
              readonly
              value="Responsable Quemado"
              title="Responsable Quemado (Texto demasiado largo)"
            />
          </mat-form-field>
        </div>
      </div>
      <!-- Columna derecha -->
      <div class="input-container">
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Denominación del programa - proyecto</mat-label>
            <input
              matInput
              [formControl]="denominacionprogproyecto"
              readonly
              value="Supervisión Quemada"
              title="Supervisión Quemada (Texto demasiado largo)"
            />
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Supervisión del proyecto</mat-label>
            <input
              matInput
              [formControl]="supervisionproyecto"
              readonly
              value="Supervisión Quemada"
              title="Supervisión Quemada (Texto demasiado largo)"
            />
          </mat-form-field>
        </div>
      </div>

      <!-- TextAreas -->
      <div class="textarea-container">
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Fecha de Inicio</mat-label>
            <textarea matInput [formControl]="fechaInicio" readonly>{{
              fechaInicio.value
            }}</textarea>
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Fecha Final</mat-label>
            <textarea matInput [formControl]="fechaFinal" readonly>{{
              fechaFinal.value
            }}</textarea>
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>ODS</mat-label>
            <textarea matInput [formControl]="ods" readonly>{{
              ods.value
            }}</textarea>
          </mat-form-field>
        </div>
      </div>

      <div class="textarea-container">
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Objetivo PND</mat-label>
            <textarea matInput [formControl]="objetivopnd" readonly>{{
              objetivopnd.value
            }}</textarea>
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Objetivo estratégico del PDOT</mat-label>
            <textarea matInput [formControl]="objetivopdot" readonly>{{
              objetivopdot.value
            }}</textarea>
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Objetivo del programa/proyecto</mat-label>
            <textarea matInput [formControl]="objetivoprogproyecto" readonly>{{
              objetivoprogproyecto.value
            }}</textarea>
          </mat-form-field>
        </div>
      </div>

      <div class="textarea-container">
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Indicador de la meta</mat-label>
            <textarea matInput [formControl]="indicardemeta" readonly>{{
              indicardemeta.value
            }}</textarea>
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Meta del programa/proyecto</mat-label>
            <textarea matInput [formControl]="metadelprogproyecto" readonly>{{
              metadelprogproyecto.value
            }}</textarea>
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Linea base</mat-label>
            <textarea matInput [formControl]="lineabase" readonly>{{
              lineabase.value
            }}</textarea>
          </mat-form-field>
        </div>
      </div>

      <!-- Inputs -->
      <div class="input-container">
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Cobertura</mat-label>
            <input
              matInput
              [formControl]="cobertura"
              readonly
              value="Dirección Quemada"
              title="Dirección Quemada (Texto demasiado largo)"
            />
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Localización</mat-label>
            <input
              matInput
              [formControl]="localizacion"
              readonly
              value="Responsable Quemado"
              title="Responsable Quemado (Texto demasiado largo)"
            />
          </mat-form-field>
        </div>
      </div>
      <!-- Columna derecha -->
      <div class="input-container">
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Barrio</mat-label>
            <input
              matInput
              [formControl]="barrio"
              readonly
              value="Área Quemada"
              title="Área Quemada (Texto demasiado largo)"
            />
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Comunidad</mat-label>
            <input
              matInput
              [formControl]="comunidad"
              readonly
              value="Supervisión Quemada"
              title="Supervisión Quemada (Texto demasiado largo)"
            />
          </mat-form-field>
        </div>
        <div class="form-column">
          <mat-form-field class="form-field">
            <mat-label>Tipo periodo</mat-label>
            <input
              matInput
              [formControl]="tipoperiodo"
              readonly
              value="Supervisión Quemada"
              title="Supervisión Quemada (Texto demasiado largo)"
            />
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Actividades del POA -->
    <div class="card-body">
      <!-- Detalle Actividades del POA -->
      <blockquote class="blockquote text-dark" style="margin-top: 5%">
        <h1><strong>Detalle Actividades del POA</strong></h1>
      </blockquote>
      <div class="mat-elevation-z8 table-responsive" style="margin-bottom: 5%">
        <table mat-table [dataSource]="dataSource">
          <ng-container matColumnDef="nombre_actividad">
            <th mat-header-cell *matHeaderCellDef>NOMBRE</th>
            <td mat-cell *matCellDef="let elemento">
              {{ elemento.nombre }}
            </td>
          </ng-container>
          <ng-container matColumnDef="descripcion">
            <th mat-header-cell *matHeaderCellDef>DESCRIPCIÓN</th>
            <td mat-cell *matCellDef="let elemento">
              {{ elemento.descripcion }}
            </td>
          </ng-container>
          <ng-container matColumnDef="presupuesto_referencial">
            <th mat-header-cell *matHeaderCellDef>PRESUPUESTO REFERENCIAL</th>
            <td mat-cell *matCellDef="let elemento" class="currency-align">
              <span class="currency-symbol">$</span
              ><span class="currency-value">{{
                elemento.presupuesto_referencial
              }}</span>
            </td>
          </ng-container>

          <ng-container matColumnDef="recursos_propios">
            <th mat-header-cell *matHeaderCellDef>RECURSOS PROPIOS</th>
            <td mat-cell *matCellDef="let elemento" class="currency-align">
              <span class="currency-symbol">$</span
              ><span class="currency-value">{{
                elemento.recursos_propios
              }}</span>
            </td>
          </ng-container>

          <ng-container matColumnDef="recursos_externos">
            <th mat-header-cell *matHeaderCellDef>RECURSOS EXTERNOS</th>
            <td mat-cell *matCellDef="let elemento" class="currency-align">
              <span class="currency-symbol">$</span
              ><span class="currency-value">{{
                elemento.recursos_externos
              }}</span>
            </td>
          </ng-container>

          <ng-container matColumnDef="estado">
            <th mat-header-cell *matHeaderCellDef>ESTADO</th>
            <td mat-cell *matCellDef="let elemento">
              {{ elemento.estado }}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="columnasActividades"></tr>
          <tr mat-row *matRowDef="let row; columns: columnasActividades"></tr>
        </table>
      </div>

      <!-- Modal Evaluar POA -->
      <ng-template
        #evaluarPOAModal
        class="modal fade"
        id="evaluarPOAModal"
        tabindex="-1"
        aria-labelledby="evaluarPOALabel"
        aria-hidden="true"
      >
        <div
          class="modal-header text-center"
          style="background-color: rgb(0, 122, 255)"
        >
          <strong>
            <h1
              class="modal-title font-weight-bold"
              style="font-family: Arial, sans-serif; color: white"
            >
              Evaluar POA
            </h1>
          </strong>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
            (click)="cerrarModal()"
          ></button>
        </div>
        <div class="modal-body">
          <form action="">
            <div class="form-group">
              <label for="usuarioCombo">Usuario</label>
              <label id="usuarioCombo" class="form-control">
                <option *ngFor="let usuario of usuarios" [value]="usuario.id">
                  {{ usuario.primer_nombre }} {{ usuario.primer_apellido }}
                </option>
              </label>
            </div>
            <div class="btn-group" role="group" aria-label="Aprobar/Rechazar">
              <!-- Botón Aprobar (Verde) -->
              <button
                class="btn btn-success"
                [class.btn-on]="isBtnSuccessActive"
                (click)="toggleBtnSuccess()"
              >
                Aprobar
              </button>

              <!-- Botón Rechazar (Rojo) -->
              <button
                class="btn btn-danger"
                [class.btn-on]="isBtnDangerActive"
                (click)="toggleBtnDanger()"
              >
                Rechazar
              </button>
            </div>

            <div class="form-group mt-3">
              <label for="observacionTextarea">Observación</label>
              <textarea
                id="observacionTextarea"
                class="form-control"
                [class.is-invalid]="
                  isBtnDangerActive && !observacionControl.value
                "
                rows="3"
                [formControl]="observacionControl"
              ></textarea>
            </div>
            <div class="container text-center mt-3">
              <button
                type="button"
                class="btn btn-primary"
                [disabled]="
                  !isBtnSuccessActive &&
                  (!isBtnDangerActive ||
                    (isBtnDangerActive && observacionControl.value === ''))
                "
                (click)="actualizarAprobacion()"
              >
                Guardar
              </button>

              <button
                type="button"
                class="btn btn-secondary"
                (click)="cerrarModal()"
              >
                Cancelar
              </button>
            </div>
          </form>
        </div>
      </ng-template>
    </div>
  </div>
</body>
